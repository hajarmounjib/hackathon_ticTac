<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!-- FontAwesome -->
    <script src="https://kit.fontawesome.com/9b9223f10d.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="stylesheets/style.css">
    <title>🚆 🐿️ Tic & Tac 🐿️ 🚆</title>
</head>
<body>
    <!-- HEADER -->
    <%- include('header');%>
    <div class="container-fluid">

        <div class="bg-modal">
            <div class="modal-content">
                <div>
                    <img src="./images/train.png" height="100" atl="train-logo">                    
                </div> 
            <div class="message"><h2>Your tickets are confirmed.</h2></div>
            <div class="popup-button">
                <a href="/home" class="btn width-button">Home</a>
                <a href="/last-trips" class="btn width-button" width ="60">My Last Trips</a> </div> 
            </div>
        </div>
    <div class="main-container">
       

        <% if (myBookings.length === 0) {%>
            <h4 class="titleForm mb-4">You have no tickets.</h4>
            <a href="/home" class="btn">Home</a> 
        <%} else {%>
        <h4 class="titleForm mb-4">My Tickets :</h4>
        <table class="table table-light table-borderless">
            <thead>
                <tr>
                    <th scope="col">N°</th>
                    <th scope="col">Date</th>
                    <th scope="col">Journey</th>
                    <th scope="col">Departure Time</th>
                    <th scope="col">Price</th>
                    <th scope="col">Delete</th>
                </tr>
            </thead>
            <tbody>
                <% myBookings.forEach((trip,i) => {%>
                    <tr>
                        <td><%=i+1%></td>
                        <td><%=formatDate(new Date(trip.date))%></td>
                        <td><%=trip.departure%> - <%=trip.arrival%></td>
                        <td><%=trip.departureTime%></td>
                        <td><%=trip.price%> €</td>
                        <td><a href="/delete?ticket=<%=trip._id%>"><i class="fas fa-trash"></i></a></td>
                    </tr>
                <%});%>
            </tbody>
            <tfoot>
                <tr class="table-danger">
                    <td>Total</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td><%=totalPrice%> €</td>
                    <td></td>
                </tr>
            </tfoot>
        </table>
        <button type="submit" class="btn" id="pop-up">Confirm</button>
        <a href="/home" class="btn">New search</a>  
        <%}%>
      </div>
      <%-include('footer');%>
</div>
    <!-- SCRIPTS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="javascripts/script.js"></script>
</body>
</html>